# ùúåHammer (MICRO 2025)

[![Academic Code](https://img.shields.io/badge/Origin-Academic%20Code-C1ACA0.svg?style=flat)]() [![Language Badge](https://img.shields.io/badge/Made%20with-C/C++-blue.svg)](https://isocpp.org/std/the-standard) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT) [![Paper](https://img.shields.io/badge/To%20appear%20in-MICRO%20'25-brightgreen.svg)](https://microarch.org/micro58/) 

This is the source code for the paper "ùúåHammer: Reviving RowHammer Attacks on New Architectures via Prefetching", which is to appear at the 58th IEEE/ACM International Symposium on Microarchitecture (MICRO'25).

## Quick Start

### Reverse Engineering
```bash
cd reverse && \
make && make run
```

Example result:
```console
=== BANK bits ===
9, 11, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33
=== The 5 bank function ===
( 16, 20, 23, 24, 27, 30, 33 )
( 14, 18, 26, 29, 32 )
( 17, 21, 22, 25, 28, 31 )
( 15, 19 )
( 9, 11, 13 )
[+] done!
[+] cost: 4.493891 sec
```

### Hammering

#### Step 1: Build the Project
```bash
cd rhohammer && \
mkdir build && \
cd build && \
cmake .. && \
make -j$(nproc)
```

#### Step 2: Run Fuzzing
The address configuration is generated and should be replaced according to results generated by the reverse-engineering tool.

```bash
# Run Fuzzing
sudo ./rhoHammer --dimm-id 1 --runtime-limit 21600 --geometry 2,4,4 --samsung --sweeping
```

Results are stored in `stdout.log`.

#### Step 3: Run Sweeping
```bash

# Run sweeping with generated patterns
sudo ./rhoHammer --dimm-id 1 --runtime-limit 21600 --geometry 2,4,4 --samsung -j fuzz-summary.json --sweeping
```

#### Usage Notes

- Requires sudo privileges for memory access and huge page allocation
- The `--dimm-id` parameter specifies the target DIMM identifier
- The `--geometry` parameter defines DRAM geometry (ranks,bankgroups,banks)
- The `--sweeping` flag enables pattern sweeping over contiguous memory
- Use `-j` to load previously generated patterns from JSON file
- more information : https://github.com/comsec-group/zenhammer

## Advanced Tools
To simplify above processes and facilitate detailed experiments, we developed a series of tools located in the tool/ directory.
For example, as root:

#### Fuzzing
```bash
./start_fuzz.sh
```

#### Sweeping
```bash
./start_sweep.sh
```

#### NOP Count vs Bit-Flip Count
```bash
./start_nop_test.sh [starting_nop_count] [ending_nop_count] [stride]
```

## Citing Our Work

To cite ùúåHammer, please use the following BibTeX entry:

```
@inproceedings{micro2025rhohammer,
  title={$\rho$Hammer: Reviving RowHammer Attacks on New Architectures via Prefetching},
  author={Chen, Weijie and Tang, Shan and Tang, Yulin and Luo, Xiapu and Zhang, Yinqian and Qiang, Weizhong},
  booktitle={Proceedings of the 58th IEEE/ACM International Symposium on Microarchitecture{\textregistered}},
  pages={1433--1447},
  year={2025}
}
```